<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Secret Santa</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        textarea { width: 100%; height: 100px; }
        .participant { margin: 10px 0; }
        .result { font-weight: bold; margin-top: 5px; color: green; }
    </style>
</head>
<body>
    <h1>🎅 Secret Santa – Tirage au sort</h1>
    <p>Entrez un nom par ligne :</p>
    <textarea id="namesInput"></textarea><br><br>
    <button onclick="genererBoutons()">Lancer le tirage secret</button>

    <h2>Participants :</h2>
    <div id="participants"></div>

    <script>
        let tirage = [];

        function genererBoutons() {
            const input = document.getElementById("namesInput").value;
            const names = input.split("\n").map(n => n.trim()).filter(n => n !== "");

            if (names.length < 2) {
                alert("Entrez au moins 2 noms.");
                return;
            }

            // Mélanger les destinataires jusqu'à ce que personne ne se tire lui-même
            let shuffled;
            do {
                shuffled = [...names].sort(() => Math.random() - 0.5);
            } while (shuffled.some((name, i) => name === names[i]));

            tirage = names.map((giver, i) => ({ from: giver, to: shuffled[i] }));

            const container = document.getElementById("participants");
            container.innerHTML = "";

            tirage.forEach(pair => {
                const div = document.createElement("div");
                div.className = "participant";
                const btn = document.createElement("button");
                btn.innerText = `Voir destinataire pour ${pair.from}`;
                btn.onclick = () => {
                    const msg = document.createElement("div");
                    msg.className = "result";
                    msg.innerText = `🎁 ${pair.from}, tu dois offrir un cadeau à : ${pair.to}`;
                    div.appendChild(msg);
                    setTimeout(() => msg.remove(), 7000); // Masquer après 7 sec
                };
                div.appendChild(btn);
                container.appendChild(div);
            });
        }
    </script>
</body>
</html>
